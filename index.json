{
  "index.html": {
    "href": "index.html",
    "title": "樹木管理ダッシュボード",
    "summary": "樹木管理ダッシュボード 「樹木管理ダッシュボード」は、樹木管理台帳システムです。地方公共団体や民間企業等がこれまで紙やPDFなどで管理し、形式や所在が統一されていなかった緑地関連データを、一元的にデータベースで管理する機能を整備することで、効率的な樹木管理を実現することを目的としています。 本システムは、3D都市モデルを活用した樹木管理機能及び緑の効果の定量的評価を支援する取り組みである「樹木データを活用した温熱環境シミュレータの開発」の一部として開発されたWebアプリケーションです。"
  },
  "manual/devMan.html": {
    "href": "manual/devMan.html",
    "title": "環境構築手順書",
    "summary": "環境構築手順書 1 本書について 本書では、樹木管理ダッシュボード（以下「本システム」という。）の利用環境構築手順について記載しています。本システムの構成や仕様の詳細については以下も参考にしてください。 技術検証レポート 2 動作環境 本システムのサーバサイドの動作環境は以下のとおりです。 項目 最小動作環境 推奨動作環境 OS Microsoft Windows 10 以上 または macOS 12 Monterey 以上 同左 CPU Pentium 4 以上 同左 メモリ 8GB以上 同左 クライアント（ブラウザ）の動作環境は以下のとおりです。 項目 動作環境 ブラウザ Google Chrome 最新版 本システムで使用するソフトウェアおよびサービスの一覧は以下のとおりです。 種別 名称 バージョン 内容 オープンソースソフトウェア Apache HTTP Server 2.4.58 Webアプリを配信するためのWebサーバ オープンソースソフトウェア PostGIS 3.4.1 PostgreSQL で位置情報を扱うための拡張機能 オープンソースRDBMS PostgreSQL 16.2 樹木台帳データ等を格納するリレーショナルデータベース オープンソースライブラリ React.js 19.x UIを構築するためのJavaScriptライブラリ オープンソースライブラリ MapLibre GL JS 5.x 地図表示ライブラリ オープンソースライブラリ CesiumJS 1.135.x 3Dビューア用ライブラリ 商用ライブラリ AG Grid 34.x テーブル表示・集計ライブラリ クラウドサービス Firebase - 認証機能（Firebase Authentication）を提供 商用ソフトウェア FME Form 2025.1, 2025.2 データ変換 商用クラウド Cesium ion - 3Dデータの変換と配信サービス 3 事前準備 本システムで利用する下記のソフトウェア・サービスを準備します。 （1）データベースの準備 PostgreSQL を使ってPostgreSQLサーバを起動します。その上で、位置情報を扱うための拡張機能である PostGIS をインストールします。 -- PostGIS の有効化 CREATE EXTENSION IF NOT EXISTS postgis; （2）Webサーバの準備 Apache HTTP Server を使ってWebサーバを起動します。ビルド済みのフロントエンド資材を配信するためのドキュメントルートを設定してください。 （3）Node.js の準備 フロントエンドのビルドには Node.js が必要です。Node.js 公式サイトより、LTS版（v20以上）をインストールしてください。 # バージョン確認 node -v # v20.x.x 以上であることを確認 npm -v （4）Firebase プロジェクトの準備 Firebase コンソールで新規プロジェクトを作成します。 Authentication を有効化し、メール/パスワード 認証プロバイダを有効にします。 プロジェクトの設定画面から以下の値を控えます。 環境変数名 説明 VITE_FIREBASE_API_KEY Firebase API キー VITE_FIREBASE_AUTH_DOMAIN Firebase Auth ドメイン VITE_FIREBASE_PROJECT_ID Firebase プロジェクト ID VITE_FIREBASE_STORAGE_BUCKET Firebase Storage バケット VITE_FIREBASE_APP_ID Firebase アプリ ID VITE_FIREBASE_MEASUREMENT_ID Firebase 計測 ID （5）Cesium ion の準備 3D都市モデル（3DTiles）を配信するために Cesium ion のアカウントを取得し、以下の手順を実施します。 Cesium ion にサインインし、アセットを登録・公開します。 アセットIDと、必要に応じてアクセストークンを控えます。 4 インストール手順 （1）リポジトリの取得 こちらから樹木管理ダッシュボードのソースコードをダウンロードします。 git clone https://github.com/Project-PLATEAU/green-dashboard.git cd green-dashboard （2）環境変数の設定 プロジェクトルート直下に .env ファイルを作成し、以下の環境変数を設定します。 # アプリケーション名（任意） VITE_PROJECT_NAME=樹木管理ダッシュボード VITE_PROJECT_SHORT_NAME=樹木管理 # バックエンドAPIのエンドポイント VITE_API_ENDPOINT=https://<サーバのホスト名またはIPアドレス>/api # Firebase 認証情報（3事前準備（4）で控えた値を設定） VITE_FIREBASE_API_KEY=<Firebaseのapi_key> VITE_FIREBASE_AUTH_DOMAIN=<Firebaseのauth_domain> VITE_FIREBASE_PROJECT_ID=<FirebaseのprojectId> VITE_FIREBASE_STORAGE_BUCKET=<FirebaseのstorageBucket> VITE_FIREBASE_APP_ID=<FirebaseのappId> VITE_FIREBASE_MEASUREMENT_ID=<FirebaseのmeasurementId> # データ暗号化キー（任意。設定するとローカルストレージのデータを暗号化） # VITE_ENCRYPTION_KEY=<任意の文字列> # デバッグモード（開発時のみ true に設定） # VITE_DEBUG=true （3）依存ライブラリのインストール npm install postinstall スクリプトにより、以下の処理が自動的に実行されます。 src/resources を public/resources へコピー node_modules/cesium/Build/Cesium を src/cesium および public/cesium へコピー （4）ビルド（本番環境） npm run build ビルド成果物は dist ディレクトリに出力されます。 （5）Webサーバへの配置 dist ディレクトリの内容を、3（2）で準備したWebサーバのドキュメントルートに配置します。 # 例：Apache のドキュメントルートへコピー cp -r dist/* /var/www/html/ SPA（シングルページアプリケーション）のため、すべてのリクエストを index.html にフォールバックするよう Apache の設定を行います。 <Directory /var/www/html> Options -Indexes AllowOverride All </Directory> .htaccess をドキュメントルートに配置します。 <IfModule mod_rewrite.c> RewriteEngine On RewriteBase / RewriteRule ^index\\.html$ - [L] RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d RewriteRule . /index.html [L] </IfModule> （6）開発サーバの起動（開発時のみ） 本番環境へのデプロイではなく、ローカル開発環境での動作確認を行う場合は以下のコマンドを実行します。 npm run dev デフォルトでは http://localhost:5173 でアプリケーションが起動します。 5 バックエンドAPIの構築 本システムのフロントエンドは、バックエンドAPIと連携して動作します。バックエンドAPIはPostgreSQLデータベースに接続し、樹木台帳データや文書データ、ユーザ情報等を提供します。 （1）データベースの作成 PostgreSQLに接続し、本システム用のデータベースを作成します。 CREATE DATABASE green_dashboard ENCODING 'UTF8'; \\c green_dashboard CREATE EXTENSION IF NOT EXISTS postgis; （2）テーブルの作成 樹木台帳の主要なデータ項目は以下のとおりです。バックエンドAPIの実装に合わせてテーブルを作成してください。 属性項目 フィールド名 データ型 備考 内部ID id integer 主キー 樹木UID uid text ユニーク識別子 樹木ID tree_id text 管理番号 路線樹木番号 route_treenumber text 座標（位置情報） the_geom geometry(Point, 4326) PostGIS 樹木タイプ type text 高木 / 中木 など 種名 name text 樹高 (m) height float 幅 (m) width float 延長 (m) length float 幹周 (cm) circumference integer 幹周（複数本） circumferences jsonb 低木種名 teiboku_names text[] 低木幅 (m) teiboku_width float 低木延長 (m) teiboku_length float 写真 tree_photos text[] 画像ファイルパス 外観診断 ases_visual text 腐朽診断 ases_decay text 根鉢診断 ases_root text 総合判定 ases_comp text A / B1 / B2 / C 枯れ状態 is_dead boolean 要プレート発注 is_need_plate boolean メモ memo text 初回登録日時 (UNIX) date_unix bigint 最終更新日時 (UNIX) updated_at_unix bigint 初回登録ユーザUID registered_user_uid text 初回登録ユーザ名 registered_user_name text 初回登録組織UID registered_user_office_uid text 初回登録組織名 registered_user_office_name text 最終更新ユーザUID updated_user_uid text 最終更新ユーザ名 updated_user_name text 最終更新組織UID updated_user_office_uid text 最終更新組織名 updated_user_office_name text 緯度 latitude float 経度 longitude float 6 初期データの投入 本システムの稼働に必要なデータを投入します。 （1）樹木台帳データの登録 樹木台帳データを PostgreSQL に格納します。 （2）3D都市モデルデータの登録（Cesium ion） 3D都市モデル（建物モデル・樹木モデル等）を Cesium ion にアップロードし、配信の準備を行います。 Cesium ion の管理コンソールにアクセスします。 対象データ（CityGML、3DTiles等）をアップロードし、タイル変換処理を実行します。 生成されたアセットIDを控え、バックエンドAPI の環境設定に反映します。 （3）ユーザの登録 本システムはFirebase Authentication でユーザ認証を行います。初期ユーザの登録はバックエンドAPI のユーザ管理機能、またはFirebase コンソールから実施してください。 ユーザには以下の権限を付与できます。 権限 内容 Web:Read Webアプリへのログイン（閲覧のみ） Web:Write Webアプリへのログイン（編集可能） App:Read モバイルアプリへのログイン（閲覧のみ） App:Write モバイルアプリへのログイン（編集可能） Data:Export データのエクスポート権限 User:Admin ユーザ管理権限 7 動作確認 （1）ブラウザからのアクセス WebサーバのURLにブラウザからアクセスし、ログイン画面が表示されることを確認します。 https://<サーバのホスト名またはIPアドレス>/ （2）ログイン確認 6（3）で登録したユーザのメールアドレスとパスワードでログインできることを確認します。 （3）地図・樹木台帳の表示確認 ログイン後、地図上に樹木ポイントが表示され、リスト形式での一覧表示ができることを確認します。"
  },
  "manual/userMan.html": {
    "href": "manual/userMan.html",
    "title": "操作マニュアル",
    "summary": "操作マニュアル 1 本書について 本書では、樹木管理ダッシュボード（以下「本システム」という。）の操作手順について記載しています。 2 使い方 2-1 ログイン画面 本システムをデプロイしたURLにアクセスすると以下の画面が表示されます。設定したログインID（メールアドレス）、パスワードを入力することでシステムのメイン（樹木管理）画面が表示されます。 2-2 メイン(樹木管理)画面 ① 地図とリストの表示/非表示、上下/左右の設定 ② 現在地表示、北を上にする ③ 背景地図切り替え、表示レイヤ切替 ④ 検索、ソート、フィルタ ・リストの上部のウインドウで指定した条件により検索、ソートが可能です（複数条件を設定可） ⑤ 属性情報の絞り込み ・路線や幹周などの属性情報を絞り込んで集計します。 ⑥ 集計表 ・あらかじめ設定した条件に応じて自動集計します。 ⑦ 集計表Excel出力 ・集計結果を「Eｘcel出力」ボタンでエクスポートします。 ⑧ 2D/3D地図表示 ・2D/3D地図表示を切り替えます。 ⑨ データエクスポート ・全ての行/フィルター適用/選択適用（リスト左端のチェックボックスで選択）をした樹木リストのデータをExcelでダウンロードします 2-3 文書管理画面 ① 樹木管理/文書管理 画面切替 ・右上のハンバーガーメニューにて、「樹木管理」「文書管理」を切り替えます ② フォルダアクセス ・フォルダアイコンから選択したフォルダにアクセスします ③ ファイルのリスト表示 ・アップロードしたファイルのリストを作成し、表示します ④ ソート、検索 ・各属性の「…」ボタンからソートや検索が可能です ⑤ ファイルアップロード ・ファイルアップロードボタンから、アップロードが可能です。"
  }
}